<!DOCTYPE html>
<html lang="en" manifest="manifest.appcache">
<head>
        <meta charset="UTF-8">
        
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        
        <link rel="stylesheet" type="text/css" href="css/ol.css">
        <link rel="stylesheet" type="text/css" href="css/materialize.min.css">
        <link rel="stylesheet" type="text/css" href="css/chartist.min.css">
        <link rel="stylesheet" type="text/css" href="css/otherStyle.css">
        <link rel="stylesheet" type="text/css" href="css/table.css">
        
        <title>WebModeler Alpha</title>
</head>
<body>
        <nav id="mainNavbar" class="navbar-fixed" style="z-index:10;">
                <div class="nav-wrapper fixed">
                        <a href="#" class="brand-logo left" style="margin-left: 8px;">WebModeler<span class="new badge red" data-badge-caption="alpha"></span></a>
                        <ul class="right">
                                <li><a class="waves-effect waves-light modal-trigger" href="#projBackground">Project Background</a></li>
                                <li><a class="waves-effect waves-light modal-trigger" href="#changelogPopup">Changelog</a></li>
                                <li><a class="waves-effect waves-light" href="https://github.com/thenellt/WebModeler" target="_blank">Github</a></li>
                        </ul>
                </div>
        </nav>
        
        <div id="projBackground" class="modal modal-fixed-footer" style="width: 75%;">
                <div class="modal-content">
                        <h4>Project Background Information</h4>
                        <p>A bunch of text...</p>
                </div>
                <div class="modal-footer">
                        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Close</a>
                </div>
        </div>
        
        <div id="changelogPopup" class="modal modal-fixed-footer" style="width: 75%;">
                <div class="modal-content">
                        <h4>Project Change Log:</h4>
                        <div id="changeLogEntries"></div>
                </div>
                <div class="modal-footer">
                        <a href="#!" class="modal-action modal-close waves-effect waves-green btn-flat ">Close</a>
                </div>
        </div>

        <table id="mainContentContainer">
                <tr>
                        <td class="tab">
                                <div class="tab">
                                        <button id="getStartedTab" class="tablinks waves-effect waves-light defaultOpen" onclick="changeToGetStarted()">Get Started</button>
                                        <button id="parameterSetupTab" class="tablinks waves-effect waves-light" onclick="changeTab('parameterSetup')">Simulation Parameters</button>
                                        <button id="popSetupTab" class="tablinks waves-effect waves-light" onclick="changeToPopulations()" style=" border-bottom: 1px solid LightGrey;">Setup Populations</button>
                                        <button id="resultsPageTab" class="tablinks waves-effect waves-light" onclick="changeToOutput()">Visual Results</button>
                                        <button id="statsPageTab" class="tablinks waves-effect waves-light" onclick="changeTab('statsPage')">Statistical Results</button>
                                        <div class="fillertab"></div>
                                </div>
                        </td>
                        <td class="content">
                                <div id="javascriptError" class="center" style="margin-top: 150px;">
                                        <div class="preloader-wrapper active">
                                        <div class="spinner-layer spinner-red-only">
                                        <div class="circle-clipper left">
                                        <div class="circle"></div>
                                        </div><div class="gap-patch">
                                        <div class="circle"></div>
                                        </div><div class="circle-clipper right">
                                        <div class="circle"></div>
                                        </div>
                                        </div>
                                        </div>
                                        <div class="row"> If you can see this for more than 10 seconds there was a problem downloading or running javascript. This application requires javascript to run.</div>
                                </div>
                                <div class="tabcontent scale-transition scale-out" id="getStarted">
                                        <h4 class="header">Start or Continue a Simulation</h4>
                                        <div class="divider" style="margin-bottom: 10px;"></div>

                                        <div class="row">
                                                <div class="col s6"><h5>Start a new simulation:</h5></div>
                                                <div class="col s3">
                                                        <a class="waves-effect waves-light btn red darken-2 hide" id="resetButton" onclick="promptForReset()">Reset Simulation</a>
                                                </div>
                                                <div class="col s3" id="newSimButton">
                                                        <a class="waves-effect waves-light btn" onclick="newSimulation()">New Simulation</a>
                                                </div>
                                                <div class="col s3 hide" id="quickSaveButton">
                                                        <a class="waves-effect waves-light btn" onclick="quickSave();">Quicksave</a>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="col s6">
                                                        <h5>Load paramaters from file:</h5>
                                                </div>
                                                <div class="col s3 offset-s3">
                                                        <a class="waves-effect waves-light btn" id="loadParams" onclick="document.getElementById('loadConfigFileButton').click();">
                                                                Load File
                                                        </a>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="col s6">
                                                        <h5>Load a cached simulation:</h5>
                                                </div>
                                                <div class="col s6" id="persistMessage" style="margin-top: 18px;"></div>
                                        </div>
                                        <ul id="persistSaveContainer" class="collapsible popout" data-collapsible="accordion"></ul>
                                        <form id="loadConfigFileForm" style="display: none;"><input id="loadConfigFileButton" type="file" onchange='loadFromFile(this);' style="display: none;"></form>
                                </div>
                                <div class="tabcontent" id="parameterSetup" style="display: none;">
                                        <div class="row">
                                                <div class="col s9"><h4>Enter Simulation Parameters</h4></div>
                                                <div class="col s3" style="margin-top: 16.5px">
                                                        <a class="waves-effect waves-light btn tooltipped" onclick="promptForDefaults()"
                                                                data-position="bottom" data-delay="100" data-tooltip="Populates all fields with reasonable values. Overwrites prior settings!">
                                                        Use Defaults</a>
                                                </div>
                                        </div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Simulation Name:</h5></div>
                                                <div class="col s3"><input type="text" id="paramName"></div>
                                        </div>
                                        <div class="divider" style="margin-bottom: 8px;"></div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Duration (Years):</h5></div>
                                                <div class="col s3"><input type="text" id="paramYears"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light tooltipped" data-position="left" data-delay="50" data-tooltip="Number of years over which the simulation will be run."><i>?</i></a></div>
                                        </div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Carrying Capacity:</h5></div>
                                                <div class="col s3"><input type="text" id="paramCarry"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light tooltipped" data-position="left" data-delay="50" data-tooltip="Number of animals the land can support per square kilometer."><i>?</i></a></div>
                                        </div>
                                        <div class="divider" style="margin-bottom: 8px;"></div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Animal Diffusion Rate:</h5></div>
                                                <div class="col s3"><input type="text" id="paramDifRate"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light tooltipped" data-position="left" data-delay="50" data-tooltip="Impacts that rate at which animals migrate from higher to lower population areas."><i>?</i></a></div>
                                        </div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Animal Growth Rate:</h5></div>
                                                <div class="col s3"><input type="text" id="paramGrowthRate"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light tooltipped" data-position="left" data-delay="50" data-tooltip=""><i>?</i></a></div>
                                        </div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Animal Encounter Rate:</h5></div>
                                                <div class="col s3"><input type="text" id="paramEncounterRate"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light" id="encounterRateHelp"><i>?</i></a></div>
                                        </div>
                                        <div class="divider" style="margin-bottom: 8px;"></div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Hunter Kill Probability (0.0 - 1.0):</h5></div>
                                                <div class="col s3"><input type="text" id="paramKillProb"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light tooltipped" data-position="left" data-delay="50" data-tooltip="Probability that an animal encounter results in a kill."><i>?</i></a></div>
                                        </div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Hunts per Hunter per Year:</h5></div>
                                                <div class="col s3"><input type="text" id="paramHphy"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light tooltipped" data-position="left" data-delay="50" data-tooltip="Used in simulating hunting effort."><i>?</i></a></div>
                                        </div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Hunter Range (outbound kilometers):</h5></div>
                                                <div class="col s3"><input type="text" id="rangeHphy"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light tooltipped" data-position="left" data-delay="50" data-tooltip="Distance that simulated hunts extend from a village."><i>?</i></a></div>
                                        </div>
                                        <div class="divider" style="margin-bottom: 8px;"></div>
                                        <div class="row">
                                                <div class="col s4"><a class="waves-effect waves-light modal-trigger btn" href="#advancedSettings">Advanced Settings</a></div>
                                                <div class="col s2 offset-s4"><a class="waves-effect waves-light btn" onclick="changeTab('getStarted')">
                                                        Back
                                                </a></div>
                                                <div class="col s2"><a class="waves-effect waves-light btn" onclick="changeToPopulations()">
                                                        Continue
                                                </a></div>
                                        </div>
                                </div>
                                <div class="tabcontent" id="popSetup" style="display: none;">
                                        <div class="row">
                                                <div class="col s6"><h4>Setup Populations</h4></div>
                                                <div class="col s3" style="padding: 16px 0px 0px 0px;"><a class="waves-effect waves-light btn" id="importPopData" onclick="$('#popImportDialog').modal('open')">Import Data</a></div>
                                                <div class="col s3" style="padding: 16px 0px 0px 0px;">
                                                        <a class='dropdown-button btn' href='#' data-activates='viewDropdown'>Change View</a>
                                                        <ul id='viewDropdown' class='dropdown-content'>
                                                                <li><a href="#!" onclick="togglePopulationView(0)">Map View</a></li>
                                                                <li><a href="#!" onclick="togglePopulationView(1)">Table View</a></li>
                                                        </ul>
                                                </div>

                                        </div>
                                        <div id="popMapContent" class="hide" style="height: 80%; width: 100%;">
                                                <div class="row">
                                                        <div class="col s9"><i>Click on the map to add a population to that location. Click on an existing population to edit it.</i></div>
                                                </div>
                                                <div class="divider" style="margin-bottom: 4px;"></div>
                                                <div class="row" id="popMapRow">
                                                        <div id="popMapDiv" class="map" style="height: 500px; min-width: 600px;"></div>
                                                </div>
                                                <div class="divider" style="margin-top: 4px; margin-bottom: 8px;"></div>
                                        </div>
                                        <div id="popTableContent" style="min-height: 500px; min-width: 600px;">
                                                <div class="row">
                                                        <div class="col s12">
                                                                Rows will gain a gray background when they are valid. Only valid rows are used when the simulation is run. Kill Rate (percentage chance to kill an animal during an encounter) can be left blank in order to use the one from the parameters page.
                                                        </div>
                                                </div>
                                                <table class="bordered highlight" id="popTable" style="margin-bottom: 8px;">
                                                        <thead>
                                                                <tr>
                                                                        <th>Name</th>
                                                                        <th>Longitude</th>
                                                                        <th>Latitude</th>
                                                                        <th>Population</th>
                                                                        <th>Growth R Value</th>
                                                                        <th>Kill Rate</th>
                                                                </tr>
                                                        </thead>
                                                        <tbody id="popTableBody"></tbody>
                                                </table>
                                                <div class="row">
                                                        <div class="col s3 offset-s6">
                                                                <a class="waves-effect waves-light btn" id="addRowButton" onclick='addYearlyRow()'>
                                                                        Yearly Row
                                                                </a>
                                                        </div>
                                                        <div class="col s3">
                                                                <a class="waves-effect waves-light btn" id="addRowButton" onclick='addRow("popTable", -1)'>
                                                                        Add Row
                                                                </a>
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="row" style="bottom: 8px; width: 90%">
                                                <div class="col s3 offset-s9">
                                                        <a class="waves-effect waves-light btn" id="runSimButton" onclick="setupSimulation()">
                                                                Run Simulation
                                                        </a>
                                                </div>
                                        </div>
                                </div>
                                <div class="tabcontent" id="resultsPage" style="display: none;">
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s6"><h4>Simulation Results</h4></div>
                                        </div>
                                        <ul class="collapsible" data-collapsible="accordion" id="visualCollapsable">
                                                <li>
                                                <div class="collapsible-header active"><i class="material-icons">map</i>Heatmap with Sattelite Overlay</div>
                                                <div class="collapsible-body">
                                                        <div class="row" style="margin-bottom: 4px;">
                                                                <div class="col s10">
                                                                        The saved image will look as you see it below. Zoom or pan the map preview to select the area to save.
                                                                </div>
                                                                <div class="col s2">
                                                                        <a class="waves-effect waves-light btn" onclick="openFullscreenViewer()">Fullscreen</a>
                                                                </div>
                                                        </div>
                                                        <div class="row" id="resultsMapContainer">
                                                                <div id="resultMapDiv"></div>
                                                        </div>
                                                        <div id="viewControlsContainer">
                                                        <div class="row" style="margin-bottom: 0px;" id="viewerControls">
                                                                <div class="col s4">
                                                                        <div id="opacityLabel">
                                                                                Overlay Opacity:
                                                                        </div>
                                                                        <p class="range-field" style="margin: 0px;">
                                                                                <input type="range" id="opacitySlider" min="0" max="100" scale="1" oninput="updateOutputOpacity(this)"/>
                                                                        </p>
                                                                </div>
                                                                <div class="col s3">
                                                                        Village Names:
                                                                        <div class="switch" style="margin-top: 4px;">
                                                                                <label>
                                                                                        Off
                                                                                        <input type="checkbox" onchange="toggleVillageLabels(this)" checked="true" id="popLabelToggle">
                                                                                        <span class="lever"></span>
                                                                                        On
                                                                                </label>
                                                                        </div>
                                                                </div>
                                                                <div class="col s2">
                                                                         Heatmap Year:
                                                                         <input type="number" min="0" step="1" value="0" id="overlayYear" style="margin: 0px; height: 30px;">
                                                                </div>
                                                                <div class="col s3" style="margin-top: 8px;">
                                                                        <a class="waves-effect waves-light btn saveButton right" onclick="saveImgToFile(1);">Save Image</a>
                                                                </div>
                                                        </div></div>
                                                </div>
                                                </li>
                                                <li>
                                                <div class="collapsible-header"><i class="material-icons">leak_add</i>Plain Heatmap</div>
                                                <div class="collapsible-body">
                                                        <div class="row">
                                                                <div class="col s6">
                                                                        <h5>Save standalone heatmaps:</h5>
                                                                </div>
                                                        </div>
                                                        <div class="row">
                                                                <div class="col s4">
                                                                        <div id="rawHeatmapContainer"></div>
                                                                </div>
                                                                <div class="col s6">
                                                                        <div class="row">
                                                                                <div class="col s6" style="margin-top: 10px;">
                                                                                        Set heatmap scale (1 is 100%):
                                                                                </div>
                                                                                <div class="col s4">
                                                                                        <div id="rawHeatmapPixelSize"></div>
                                                                                </div>
                                                                                <div class="col s2">
                                                                                        <input type="number" min="1" max="8" step="1" value="1" id="heatmapScale" style="margin-bottom: 0px;" onchange="rawHWScaleInput(this.value)">
                                                                                </div>
                                                                        </div>
                                                                        <div class="row">
                                                                                <div class="col s3" style="margin-top: 10px;">
                                                                                        Year:
                                                                                </div>
                                                                                <div class="col s2">
                                                                                        <input type="number" min="0" step="1" value="0" id="heatmapYear" style="margin-bottom: 0px;" onchange="rawHMYearInput(this.value)">
                                                                                </div>
                                                                                <div class="col s6 offset-s1">
                                                                                        <a class="waves-effect waves-light btn" onclick="saveImgToFile(0);">Save Single Year</a>
                                                                                </div>
                                                                        </div>
                                                                        <div class="row">
                                                                                <div class="col s6 offset-s6">
                                                                                        <a class="waves-effect waves-light btn" onclick="saveImgToFile(0);">Save All Years</a>
                                                                                </div>
                                                                        </div>
                                                                </div>
                                                                <!--<div class="col s3">
                                                                        <a class="waves-effect waves-light btn" onclick="saveImgToFile(1);">Save Map Image</a>
                                                                </div> -->
                                                        </div>
                                                        <div class="row">
                                                                <div class="col s2">
                                                                        Preview of year:
                                                                </div>
                                                                <div class="col s1" id="previewYearText">
                                                                        0
                                                                </div>
                                                        </div>
                                                </div>
                                                </li>
                                        </ul>
                                </div>
                                <div class="tabcontent" id="statsPage" style="display: none;">
                                        <div class="row">
                                                <div class="col s12" style="margin-bottom: 0px;">
                                                        <h4>Graphs</h4>
                                                </div>
                                        </div>
                                        <ul class="collapsible" data-collapsible="accordion">
                                                <li>
                                                        <div class="collapsible-header active">Entire Area Depletion</div>
                                                        <div class="collapsible-body">
                                                                <div class="row">
                                                                        <div class="col s12" id="entireAreaChartContainer" style="resize: both;">
                                                                                <div class="ct-chart ct-perfect-fourth" id="myFirstChart">
                                                                                </div>
                                                                        </div>
                                                                </div>
                                                        </div>
                                                </li>
                                                <li>
                                                        <div class="collapsible-header">Surrounding Area Depletion</div>
                                                        <div class="collapsible-body">
                                                                <div class="row"><div class="col 12">Charts the depletion of the cells in a square around each population with side lengths equal to the hunt range.</div></div>
                                                                <div class="row">
                                                                        <div class="col s12" id="chartContainer">
                                                                                <div class="ct-chart ct-perfect-fourth" id="surroundingChart">
                                                                                </div>
                                                                        </div>
                                                                </div>
                                                        </div>
                                                </li>
                                        </ul>
                                        <div class="row" style="margin-bottom: 0px;">
                                                <div class="col s12">
                                                        <h4>Save Data Files</h4>
                                                </div>
                                        </div>
                                        <div class="divider" style="margin-bottom: 8px;"></div>
                                        <div class="row">
                                                <div class="col s6" id="csvOptions">
                                                        <h5>Save yearly depletion data (CSVs): </h5>
                                                </div>
                                                <div class="col s1" style="margin-top: 10px;">Year:</div>
                                                <div class="col s1">
                                                        <input type="number" min="0" step="1" value="0" id="csvNumberInput">
                                                </div>
                                                <div class="col s2">
                                                        <a class="waves-effect waves-light btn saveButton" onclick="csvSingleYear()">Single Year</a>
                                                </div>
                                                <div class="col s2">
                                                        <a class="waves-effect waves-light btn saveButton" onclick="csvAllYears()">All Years</a>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="col s9">
                                                        <h5>Save the configuration to file (includes populations):</h5>
                                                </div>
                                                <div class="col s3">
                                                        <a class="waves-effect waves-light btn saveButton" onclick="saveSimToFile();">Save Configuration</a>
                                                </div>
                                        </div>
                                </div>
                        </td>
                </tr>
        </table>
        
        <div id="advancedSettings" class="modal modal-fixed-footer"
                style="width: 90%; max-height: 80% !important; height: 80% !important; max-width: 1000px;">
                <div class="modal-content">
                        <h4>Advanced Settings:</h4>
                        <p>Changing these settings can have a <b>huge</b> impact on simulation results and/or runtime.</p>
                        <ul class="collection">
                                <li class="collection-item">
                                        <div class="row" style="margin-bottom: 0;">
                                                <div class="col s8"><h5>Theta:</h5></div>
                                                <div class="col s3"><input type="text" id="paramTheta" style="margin-bottom: 0;"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light" id="thetaHelp"><i>?</i></a></div>
                                        </div>
                                </li>
                                <li class="collection-item">
                                        <div class="row" style="margin-bottom: 0;">
                                                <div class="col s7"><h5>Diffusion Samples:</h5></div>
                                                <div class="col s1"></div>
                                                <div class="col s3"><input type="text" id="diffSamples" style="margin-bottom: 0;"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light tooltipped" data-position="left" data-delay="50" data-tooltip="Subdivides diffusion calculations each year. Very large performance impact." id="diffSamplesHelp"><i>?</i></a></div>
                                        </div>
                                </li>
                                <li class="collection-item">
                                        <div class="row" style="margin-bottom: 0;">
                                                <div class="col s8"><h5>Heatmap base color:</h5></div>
                                                <div class="col s1"><input type="color" value="#ffeda0" style="margin-top: 6px;" id="paramLowColor"></div>
                                                <div class="col s2"><a class="btn waves-effect waves-light" onclick="resetColorCode(0);">Default</a></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light tooltipped" data-position="left" data-delay="50" data-tooltip="Color of the undepleted end of the heatmap gradient."><i>?</i></a></div>
                                        </div>
                                </li>
                                <li class="collection-item">
                                        <div class="row" style="margin-bottom: 0;">
                                                <div class="col s8"><h5>Heatmap Depleted color:</h5></div>
                                                <div class="col s1"><input type="color" value="#f03b20" style="margin-top: 6px;" id="paramHighColor"></div>
                                                <div class="col s2"><a class="btn waves-effect waves-light" onclick="resetColorCode(1);">Default</a></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light tooltipped" data-position="left" data-delay="50" data-tooltip="Color of the depleted end of the heatmap gradient."><i>?</i></a></div>
                                        </div>
                                </li>
                                <li class="collection-item">
                                        <div class="row" style="margin-bottom: 0;">
                                                <div class="col s8"><h5>Heatmap Overlay Opacity (0.0 - 1.0):</h5></div>
                                                <div class="col s3"><input type="text" id="imgOpacity" style="margin-bottom: 0;"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light tooltipped" data-position="left" data-delay="50" data-tooltip="Sets how transparent the heatmap overlay is over the background map."><i>?</i></a></div>
                                        </div>
                                </li>
                        </ul>

                </div>
                <div class="modal-footer">
                        <a href="#!" class="waves-effect waves-green btn" onclick="closeAdvancedSettings(0);" style="margin-right: 8px;">Done</a>
                        <a href="#!" class="waves-effect waves-red btn red darken-2" onclick="closeAdvancedSettings(1);"
                                style="margin-right: 24px;">Cancel</a>
                </div>
        </div>
        
        <div id="floatingPopEditor" class="modal modal-fixed-footer"
                style="width: 90%; max-height: 80% !important; height: 80% !important; max-width: 1000px;">
                <div class="modal-content">
                        <h4>Population Properties</h4>
                        <div class="row"><div class="col s12">
                                <i>
                                        Kill Rate (percentage chance to kill an animal during an encounter) can be left blank in order to use the one from the parameters page.
                                </i>
                        </div></div>
                        <ul class="collection">
                                <li class="collection-item" style="padding: 5px 5px 5px 5px;">
                                        <div class="row" style="margin-bottom: 0px; padding: 5px 5px 5px 5px;" >
                                                <div class="col s8"><h5>Name:</h5></div>
                                                <div class="col s4"><input type="text" id="floatPopName" style="margin-bottom: 5px;"></div>
                                        </div>
                                </li>
                                <li class="collection-item" style="padding: 5px 5px 5px 5px;">
                                        <div class="row" style="margin-bottom: 0px;">
                                                <div class="col s4"><h5>Position: </h5></div>
                                                <div class="col s2"><h5>Longitude</h5></div>
                                                <div class="col s2"><input type="text" id="floatLong" style="margin-bottom: 5px;"></div>
                                                <div class="col s2"><h5>Latitude</h5></div>
                                                <div class="col s2"><input type="text" id="floatLat" style="margin-bottom: 5px;"></div>
                                        </div>
                                </li>
                                <li class="collection-item hide" style="padding: 5px 5px 5px 5px;" id="mapEditorYearlyPop">
                                        <div class="row" style="margin-bottom: 0px;">
                                                <div class="col s8"><h5>Population:</h5></div>
                                                <div class="col s4">
                                                        <a class="waves-effect waves-light btn" onclick="openYearlyEditor(currentId);" style="margin-top: 8px;"> Edit Population</a>
                                                </div>
                                        </div>
                                </li>
                                <li class="collection-item" style="padding: 5px 5px 5px 5px;" id="mapEditorExpPop">
                                        <div class="row" style="margin-bottom: 0px;">
                                                <div class="col s8"><h5>Population:</h5></div>
                                                <div class="col s4"><input type="text" id="floatPop" style="margin-bottom: 5px;"></div>
                                        </div>
                                </li>
                                <li class="collection-item" style="padding: 5px 5px 5px 5px;" id="mapEditorExpGrowth">
                                        <div class="row" style="margin-bottom: 0px;">
                                                <div class="col s8"><h5>Growth:</h5></div>
                                                <div class="col s4"><input type="text" id="floatGrowth" style="margin-bottom: 5px;"></div>
                                        </div>
                                </li>
                                <li class="collection-item" style="padding: 5px 5px 5px 5px;">
                                        <div class="row" style="margin-bottom: 0px;">
                                                <div class="col s8"><h5>Kill Rate:</h5></div>
                                                <div class="col s4"><input type="text" id="floatKill" style="margin-bottom: 5px;"></div>
                                        </div>
                                </li>
                        </ul>
                </div>
                <div class="modal-footer">
                        <a href="#!" class="waves-effect waves-red btn red darken-2 left" onclick="popEditorPassthrough(2)" style="margin-left: 8px; display: none;" id="editorDeleteButton">Delete</a>
                        <a href="#!" class="waves-effect waves-green btn" onclick="popEditorPassthrough(0);" style="margin-right: 8px;">Done</a>
                        <a href="#!" class="waves-effect waves-red btn red lighten-2" onclick="popEditorPassthrough(1);"
                                style="margin-right: 24px;">Cancel</a>
                </div>
        </div>
        
        <div id="sysDialog" class="modal modal-fixed-footer" style="max-width: 60%; max-height: 30%; height: 30%;">
                <div class="modal-content">
                        <h4 id="sysTitle"></h4>
                        <p id="sysContent"></p>
                </div>
                <div class="modal-footer">
                        <a href="#!" class="waves-effect waves-green btn" style="margin-right: 8px;" id="sysConfirm">Ok</a>
                        <a href="#!" class="waves-effect waves-red btn red darken-2" style="margin-right: 24px;" id="sysCancel">Cancel</a>
                </div>
        </div>

        <div id="fullScreenMap" class="modal modal-fixed-footer modal-fullscreen">
                <div class="modal-content">
                        <h4 id="mapViewerTitle">Fullscreen Map Viewer</h4>
                        <div id="mapViewerContent">
                                <div id="viewerMapContainer"></div>
                                <div class="divider" style="margin: 4px 0px 4px 0px;"></div>
                                <div id="viewerControlsContainer"></div>
                        </div>
                </div>
                <div class="modal-footer">
                        <a href="#!" class="waves-effect waves-green btn" style="margin-right: 8px;" onclick="closeFullscreenViewer()"><i class="material-icons left">fullscreen_exit</i>Done</a>
                </div>
        </div>
        
        <div id="popImportDialog" class="modal modal-fixed-footer" style="max-width: 80%; width: 80%; max-height: 90%; height: 90% !important;">
                <div class="modal-content" id="importDialogContent">
                        <h4>Import Population Data</h4>
                        <div class="row" style="margin-bottom: 8px;">
                                There are three types of supported file formats from which population data can be imported: simulation save files, and two forms of CSV files.
                        </div>
                        <ul class="collapsible" data-collapsible="accordion">
                                <li>
                                        <div class="collapsible-header active">Exponential Growth CSV Files</div>
                                        <div class="collapsible-body" style="padding: 16px;">
                                                <div class="row" style="margin-bottom: 12px;">Each line in this file format represents a single population. Data for each population includes a name, location, chance that an encounter results in a kill (this value is dictated by the level of technology of the village from bows to modern hunting rifles), a starting population, and the <b>r</b> value for how fast the population is growing.
                                                </div>
                                                <div class="row" style="margin-bottom: 4px;">
                                                Line format: <i>name, longitude, latitude, killRate, StartingPopulation, growthRate</i></div>
                                                <h5 style="margin: 8px 0px 4px 0px;">Example File Contents:</h5>
                                                <div class="row" style="margin: 0px;"><div class="col s12"><div class="card blue-grey" style="margin: 8px;">
                                                        <div class="card-content white-text" style="padding: 8px;">
                                                                <table>
                                                                        <tr class="example-pop">
                                                                                <td>Village1,</td><td>32.483,</td><td>24.657</td><td>.9,</td><td>55,</td><td>.1,</td>
                                                                        </tr>
                                                                        <tr class="example-pop">
                                                                                <td>Village2,</td><td>28.726,</td><td>27.014</td><td>.2,</td><td>104,</td><td>.17,</td>
                                                                        </tr>
                                                                        <tr class="example-pop">
                                                                                <td>Village3,</td><td>29.472,</td><td>29.473</td><td>-1,</td><td>86,</td><td>.13,</td>
                                                                        </tr>
                                                                </table>
                                                        </div>
                                                </div></div></div>
                                                <div class="row" style="margin-bottom: 4px; margin-top: 4px;">
                                                        <b>Note:</b> The last village in the example file, <i>Village3</i>, is an example where the killRate is ommited. Leaving the kill rate column blank or filling it with the value of <i>-1</i> indicates that a population should use the global kill rate from the parameters page.
                                                </div>
                                        </div>
                                </li>
                                <li>
                                        <div class="collapsible-header active">Yearly Defined Growth CSV Files</div>
                                        <div class="collapsible-body" style="padding: 16px;">
                                                <div class="row" style="margin-bottom: 12px;">
                                                The more powerful alternative is a format in which the population of every village is given as a discrete number for every year. This allows for modeling of populations that don't a formulaic trend. The basic format is the same as the exponential growth layout except that instead of ending in with a starting population and an <b>r</b> value, each line ends with the population each year for any number of years.
                                                </div>
                                                <div class="row" style="margin-bottom: 4px;">
                                                Line format: <i>name, longitude, latitude, killRate, PopulationYear1, PopulationYear2, PopulationYear3, </i></div>
                                                <h5 style="margin: 8px 0px 4px 0px;">Example File Contents:</h5>
                                                <div class="row" style="margin: 0px;"><div class="col s12"><div class="card blue-grey" style="margin: 8px;">
                                                        <div class="card-content white-text" style="padding: 8px;">
                                                                <table>
                                                                        <tr class="example-pop">
                                                                                <td>Village1,</td><td>32.483,</td><td>24.657</td><td>.2,</td><td>55,</td><td>58,</td><td>62,</td><td>65,</td><td>35,</td><td>36,</td>
                                                                        </tr>
                                                                        <tr class="example-pop">
                                                                                <td>New Village,</td><td>32.126,</td><td>25.014</td><td>.2,</td><td>0,</td><td>0,</td><td>0,</td><td>0,</td><td>30,</td><td>32,</td>
                                                                        </tr>
                                                                </table>
                                                        </div>
                                                </div></div></div>
                                                <div class="row" style="margin-bottom: 4px;">
                                                        Shown above is an example of using the flexibility of this format to simulate the splitting of a population into two smaller populations during the 5th year.
                                                </div>
                                        </div>
                                </li>
                                <li>
                                        <div class="collapsible-header">Simulation Save Files</div>
                                        <div class="collapsible-body" style="padding: 16px;">
                                        <div class="row" style="margin-bottom: 8px;">Importing from a save file will take the populations from the file without loading any other parameters from the file. This can be used to pull the populations out of multiple saved simulations to combine them into a single new simulation.</div>
                                        <div class="row" style="margin-bottom: 4px;">
                                                <b>Note:</b> Loading both the parameters and the populations from a save file is done from the <i>Get Started</i> page.
                                        </div>
                                        </div>
                                </li>
                        </ul>
                        <form style="display: none;" id="loadPopFileForm"><input id="loadPopFileButton" type="file" onchange='loadPopsFromFile(this)' style="display: none;"></form>
                </div>
                <div class="modal-footer">
                        <a href="#!" class="waves-effect waves-red btn blue left" style="margin-left: 18px; margin-right: 16px;" id="importDiagSelectFile" onclick="document.getElementById('loadPopFileButton').click();">Import</a>
                        <a href="#!" class="modal-action modal-close waves-effect waves-green btn" style="margin-right: 18px;" id="importDiagConfirm">Done</a>
                </div>
        </div>

        <div id="yearlyPopEditor" class="modal modal-fixed-footer" style="max-width: 65%; width: 65%; max-height: 450px; height: 50% !important; ">
                <div class="modal-content">
                        <h4 id="yearlyEditorTitle"></h4>
                        <div class="row"><div class="col s12">
                                Please enter the population of this settlement for each year as a list of postive intergers seperated by commas. Spaces between entries are optional and any whitespace will be ignored.
                        </div></div>
                        <div class="row"><div class="col s12" id="yearlyEditorYears">
                                
                        </div></div>
                        <div class="row" style="height: 100px;"><div class="col s12">
                        <textarea id="yearlyEditorInput" rows="5" style="height: 100%;">
                                
                        </textarea>
                        </div></div>
                </div>
                <div class="modal-footer">
                        <a href="#!" class="waves-effect waves-green btn" onclick="closeYearlyEditor('save')" style="margin-right: 8px;">Done</a>
                        <a href="#!" class="waves-effect waves-red btn red lighten-2" onclick="closeYearlyEditor('clear')"
                                style="margin-right: 24px;">Cancel</a>
                </div>
        </div>

        <div class="notification scale-transition scale-out" id="notificationContainer">
                <div class="row">
                        <div class="col s12">
                                <div class="card blue-grey darken-1">
                                        <div class="card-content white-text">
                                                <strong> Notification: </strong>
                                                <div id="notificationText"></div>
                                        </div>
                                </div>
                        </div>
                </div>
        </div>
        <div class="notification scale-transition scale-out" id="prgressContainer">
                <div class="row">
                        <div class="col s12">
                                <div class="card blue-grey darken-1">
                                        <div class="card-content white-text" style="padding: 12px;">
                                                <span class="card-title" id="progressText" style="margin-left: 8px;">Placeholder</span>
                                                <div class="progress">
                                                        <div class="determinate" style="width: 0%" id="progressBar"></div>
                                                </div>
                                        </div>
                                </div>
                        </div>
                </div>
        </div>

        <div id="hidepage"></div>
        
        <script src="keys.js" type="text/javascript"></script>
        <script src="js/jquery-3.2.1.min.js" type="text/javascript"></script>
        <script src="js/materialize.min.js" type="text/javascript"></script>
        <script src="js/floatingContent.js" type="text/javascript"></script>
        <script src="js/tabs.js" type="text/javascript"></script>
        <script src="js/main.js" type="text/javascript"></script>
        <script src="js/table.js" type="text/javascript"></script>
        <script src="js/FileSaver.min.js" type="text/javascript"></script>
        <script src="js/chartist.min.js" type="text/javascript"></script>
        <script src="js/jszip.min.js" type="text/javascript"></script>
        <script src="js/ol.js" type="text/javascript"></script>
        
        <script src="jsDev/dataProcessing.js" type="text/javascript"></script>
        <script src="jsDev/mapFunctionality.js" type="text/javascript"></script>
        <script src="jsDev/testFunctions.js" type="text/javascript"></script>
        <script src="jsDev/saveLoad.js" type="text/javascript"></script>
</body>
</html>
