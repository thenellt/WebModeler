<!DOCTYPE html>
<html lang="en">
<head>
        <link rel="stylesheet" href="https://openlayers.org/en/v4.2.0/css/ol.css" type="text/css">
        <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
        <!--<link rel="stylesheet" type="text/css" href="css/mainStyle.css" media="screen,projection"> -->
        <link type="text/css" rel="stylesheet" href="css/materialize.min.css"  media="screen,projection"/>
        <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
        <script type="text/javascript" src="js/materialize.min.js"></script>
        <script src="https://openlayers.org/en/v4.2.0/build/ol.js" type="text/javascript"></script>
        <link rel="stylesheet" type="text/css" href="css/otherStyle.css" media="screen,projection">
        <link rel="stylesheet" type="text/css" href="css/table.css" media="screen,projection">
        <title>WebModeler Alpha</title>
</head>
<body>
        <nav id="mainNavbar" class="navbar-fixed" style="z-index:10;">
                <div class="nav-wrapper fixed">
                        <a href="#" class="brand-logo">WebModeler<span class="new badge red" data-badge-caption="alpha"></span></a>
                        <ul class="right">
                                <li><a class="waves-effect waves-light" id="backgroundButton">Project Background</a></li>
                                <li><a class="waves-effect waves-light" id="changelogButton">Changelog</a></li>
                                <li><a class="waves-effect waves-light" href="https://github.com/thenellt/WebModeler" target="_blank">Github</a></li>
                        </ul>
                </div>
        </nav>

        <table id="mainContentContainer">
                <tr>
                        <td class="tab">
                                <div class="tab">
                                        <button id="getStartedTab" class="tablinks waves-effect waves-light defaultOpen" onclick="changeTab('getStarted')">Get Started</button>
                                        <button id="parameterSetupTab" class="tablinks waves-effect waves-light" onclick="changeTab('parameterSetup')">Simulation Parameters</button>
                                        <button id="popSetupTab" class="tablinks waves-effect waves-light" onclick="changeTab('popSetup')">Setup Populations</button>
                                        <button id="tab4" class="tablinks waves-effect waves-light" onclick="changeTab('page2')">Simulation Overview</button>
                                        <button id="tab5" class="tablinks waves-effect waves-light" onclick="changeTab(event, 'page3')">Results</button>
                                        <div class="fillertab"></div>
                                </div>
                        </td>
                        <td class="content">
                                <div class="tabcontent" id="getStarted">
                                        <h4 class="header">Start or Continue a Simulation</h4>
                                        <div class="divider" style="margin-bottom: 10px;"></div>
                                        
                                        <div class="row">
                                                <div class="col s6"><h5>Start a new simulation:</h5></div>
                                                <div class="col s3"><a class="disabled waves-effect waves-light btn red darken-2 hide" id="resetButton" onclick="resetSimulation()">
                                                        Reset Simulation
                                                </a></div>
                                                <div class="col s3"><a class="waves-effect waves-light btn" id="newSimButton" onclick="newSimulation()">
                                                        New Simulation
                                                </a></div>
                                        </div>
                                        <div class="row">
                                                <div class="col s6">
                                                        <h5>Load paramaters from file:</h5>
                                                </div>
                                                <div class="col s3 offset-s3">
                                                        <a class="disabled waves-effect waves-light btn" id="loadParams" onclick="loadParamsFromFile()">
                                                                Load File
                                                        </a>
                                                </div>
                                        </div>
                                        <div class="row">
                                                <div class="col s6">
                                                        <h5>Load a cached simulation (TODO):</h5>
                                                </div>
                                                <!--
                                                <div class="col s3 offset-s3">
                                                        <a class="disabled waves-effect waves-light btn" id="loadParams" onclick="loadParamsFromFile()">
                                                                Load File
                                                        </a>
                                                </div>
                                                -->
                                        </div>
                                        <div class="row">
                                                <div class="col s4">
                                                        <input type="file" onchange='loadFromFile(this)'>
                                                </div>
                                        </div>
                                </div>
                                <div class="tabcontent" id="parameterSetup">
                                        <div class="row">
                                                <div class="col s12"><h4>Simulation Parameters</h4></div>
                                        </div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Simulation Name:</h5></div>
                                                <div class="col s3"><input type="text" id="paramName"></div>
                                        </div>
                                        <div class="divider" style="margin-bottom: 8px;"></div>
                                        <!--
                                        //var animalDiffRate;
                                        //var animalGrowthRate;
                                        //var killProb;
                                        //var HpHy;
                                        //var encounterRate;
                                        //var huntRange;
                                        var theta;
                                        //var carryCapacity;
                                        //var years;
                                        var diffusionSamples;
                                        -->
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Duration (Years):</h5></div>
                                                <div class="col s3"><input type="text" id="paramYears"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light" id="durationHelp"><i>?</i></a></div>
                                        </div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Carrying Capacity:</h5></div>
                                                <div class="col s3"><input type="text" id="paramCarry"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light" id="carryHelp"><i>?</i></a></div>
                                        </div>
                                        <div class="divider" style="margin-bottom: 8px;"></div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Animal Diffusion Rate:</h5></div>
                                                <div class="col s3"><input type="text" id="paramDifRate"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light" id="diffusionHelp"><i>?</i></a></div>
                                        </div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Animal Growth Rate:</h5></div>
                                                <div class="col s3"><input type="text" id="paramGrowthRate"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light" id="growthHelp"><i>?</i></a></div>
                                        </div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Animal Encounter Rate:</h5></div>
                                                <div class="col s3"><input type="text" id="paramEncounterRate"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light" id="encounterRateHelp"><i>?</i></a></div>
                                        </div>
                                        <div class="divider" style="margin-bottom: 8px;"></div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Hunter Kill Probability (0.0 - 1.0):</h5></div>
                                                <div class="col s3"><input type="text" id="paramKillProb"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light" id="killProbHelp"><i>?</i></a></div>
                                        </div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Hunter per Hunter per Year:</h5></div>
                                                <div class="col s3"><input type="text" id="paramHphy"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light" id="hphyHelp"><i>?</i></a></div>
                                        </div>
                                        <div class="row" style="margin-bottom: 8px;">
                                                <div class="col s8"><h5>Hunter Range (outbound kilometers):</h5></div>
                                                <div class="col s3"><input type="text" id="rangeHphy"></div>
                                                <div class="col s1"><a class="btn-floating waves-effect waves-light" id="rangeHelp"><i>?</i></a></div>
                                        </div>
                                        <div class="divider" style="margin-bottom: 8px;"></div>
                                        <div class="row">
                                                <div class="col s4"><a class="waves-effect waves-light btn" onclick="showAdvancedSettings()">
                                                        Advanced Settings
                                                </a></div>
                                                <div class="col s2 offset-s4"><a class="waves-effect waves-light btn" onclick="changeTab('getStarted')">
                                                        Back
                                                </a></div>
                                                <div class="col s2"><a class="waves-effect waves-light btn" onclick="changeToPopulations()">
                                                        Continue
                                                </a></div>
                                        </div>
                                </div>
                                <div class="tabcontent" id="popSetup">
                                        <div class="row">
                                                <div class="col s6"><h4>Setup Populations</h4></div>
                                                <div class="col s3" style="padding: 16px 0px 0px 0px"><a class="waves-effect waves-light btn" style="padding" id="importPopData">Import Data</a></div>
                                                <div class="col s3" style="padding: 16px 0px 0px 0px">
                                                        <a class='dropdown-button btn' href='#' data-activates='dropdown1'>Change View</a>
                                                        <ul id='dropdown1' class='dropdown-content'>
                                                                <li><a href="#!" onclick="togglePopulationView(0)">Map View</a></li>
                                                                <li><a href="#!" onclick="togglePopulationView(1)">Table View</a></li>
                                                        </ul>
                                                </div>
                                                
                                        </div>
                                        <!--
                                        <div class="row">
                                                <div class="nav-content">
                                                        <ul class="tabs tabs-fixed-width">
                                                                <li class="tab"><a href="" onclick="togglePopulationView(1)" id="tableViewTab">Table View</a></li>
                                                                <li class="tab"><a href="" onclick="togglePopulationView(0)">Map View</a></li>
                                                        </ul>
                                                </div>
                                        </div>
                                        -->
                                        <div id="popMapContent" class="hide" style="height: 80%; width 100%;">
                                                <div class="divider" style="margin-bottom: 4px;"></div>
                                                <div id="popMapDiv" class="map" style="min-height: 600px; min-width: 600px;"></div>
                                                <div class="divider" style="margin-top: 4px; margin-bottom: 8px;"></div>
                                                <div class="row">
                                                        <div class="col s9"><i>Click on the map to add a population to that location. Click on an existing population to edit it.</i></div>
                                                </div>
                                        </div>
                                        <div id="popTableContent">
                                                <table class="bordered striped highlight" id="popTable" style="margin-bottom: 8px;">
                                                        <thead>
                                                                <tr>
                                                                        <th>Name</th>
                                                                        <th>Longitude</th>
                                                                        <th>Latitude</th>
                                                                        <th>Population</th>
                                                                        <th>Growth Factor</th>
                                                                        <th>Kill Rate</th>
                                                                </tr>
                                                        </thead>
                                                        <tbody></tbody>
                                                </table>
                                                <div class="row">
                                                        <div class="col s3 offset-s9">
                                                                <a class="waves-effect waves-light btn" id="addRowButton" onclick='addRow("popTable")'>
                                                                        Add Row
                                                                </a>
                                                        </div>
                                                </div>
                                        </div>
                                        <div class="row" id="heatMapContainer" style="display: none;">
                                                Simulation Raw Output:
                                                <div id="heatMapCanvas" style="max-width:600px; max-height: 600px;"></div>
                                                <div id="testMap2"></div>
                                        </div>
                                        <div class="row" style="position: absolute; bottom: 8px; width: 80%">
                                                <div class="col s3 offset-s5">
                                                        <a class="waves-effect waves-light btn" id="runSimButton" onclick="toggleImgLayer()">
                                                                Toggle ImgLayer
                                                        </a>
                                                </div>
                                                <div class="col s3 offset-s1">
                                                        <a class="waves-effect waves-light btn" id="runSimButton" onclick="runTests()">
                                                                Run Simulation
                                                        </a>
                                                </div>
                                        </div>
                                        <!--
                                        <table>
                                                <tr>
                                                        <th style ="width:10%">
                                                                <h3>Set the Map Center:</h3>
                                                                <table>
                                                                <tr>
                                                                        <th>Latitude: <input type="text" id="lat"></th>
                                                                        <th>Longitude: <input type="text" id="long"></th>
                                                                </tr>
                                                                </table>
                                                                <button type="button" id="updateButton">Update Map</button>
                                                                <h3>Add point:</h3>
                                                                <table>
                                                                <tr>
                                                                        <th>Latitude: <input type="text" id="addLat"></th>
                                                                        <th>Longitude: <input type="text" id="addLong"></th>
                                                                </tr>
                                                                </table>
                                                                <button type="button" id="addPointButton">Add</button>
                                                        </th>
                                                        <th>
                                                                <div id="map" class="map"></div>
                                                        </th>
                                                </tr>
                                                <tr>
                                                        <th>
                                                                <button type="button" id="reset">Reset</button>
                                                                <button type="button" id="extent">Update Extent</button>
                                                        </th>
                                                </tr>
                                        </table>
                                        -->
                                </div>
                        </td>
                </tr>
        </table>

        <div id='changelogContent' class="floatingContent card blue-grey lighten-4 scale-transition scale-out">
                <div class="card-content black-text">
                        <span class="card-title" id="changelogTitle"></span>
                </div>
                <div class="row" style="position: float; height: 78%;">
                        <div class="col s12" id="changeLogEntries" style="overflow: auto; height: 100%;"></div>
                </div>
                <div class="row" style="position: absolute; bottom: 8px; width: 100%">
                        <div class="col s2 offset-s10">
                                <a class="waves-effect waves-light btn" onclick="toggleChangelog(); return false;">Close</a>
                        </div>
                </div>
        </div>

        <div id='backgroundContent' class="floatingContent card blue-grey lighten-4 scale-transition scale-out">
                <div class="card-content black-text">
                        <span class="card-title" id="backgroundTitle">Project Background Information</span>
                        <div id="changelogContent">placeholder text</div>
                </div>
                <div class="row" style="position: absolute; bottom: 8px; width: 100%">
                        <div class="col s2 offset-s10">
                                <a class="waves-effect waves-light btn" onclick="toggleBackground(); return false;">Close</a>
                        </div>
                </div>
                <!--<a style="position:absolute; bottom: 15px; right: 15px;" class="waves-effect waves-light btn" onclick="toggleBackground(); return false;">Close</a> -->
        </div>

        <div id='advancedSettings' class="floatingContent card blue-grey lighten-4 scale-transition scale-out" style="z-index:19;">
                <div class="row"><div class="card-title col s12">Advanced Settings</div></div>
                <div class="row"><div class="col s12">Changing these settings can have a <strong>huge</strong> impact on simulation results and/or runtime.</div></div>
                <ul class="collection">
                        <li class="collection-item">
                                <div class="row" style="margin-bottom: 0;">
                                        <div class="col s8"><h5>Theta:</h5></div>
                                        <div class="col s3"><input type="text" id="paramTheta" style="margin-bottom: 0;"></div>
                                        <div class="col s1"><a class="btn-floating waves-effect waves-light" id="thetaHelp"><i>?</i></a></div>
                                </div>
                        </li>
                        <li class="collection-item">
                                <div class="row" style="margin-bottom: 0;">
                                        <div class="col s8"><h5>Diffusion Samples (alpha):</h5></div>
                                        <div class="col s3"><input type="text" id="diffSamples" style="margin-bottom: 0;"></div>
                                        <div class="col s1"><a class="btn-floating waves-effect waves-light" id="diffSamplesHelp"><i>?</i></a></div>
                                </div>
                        </li>
                </ul>

                <div class="row" style="position: absolute; bottom: 8px; width: 100%">
                        <div class="col s2 offset-s8">
                                <a class="waves-effect waves-light btn red darken-2" onclick="closeAdvancedSettings(1);">Cancel</a>
                        </div>
                        <div class="col s2">
                                <a class="waves-effect waves-light btn" onclick="closeAdvancedSettings(0);">Done</a>
                        </div>
                </div>
        </div>
        <div id="floatingPopEditor" class="floatingContent card blue-grey lighten-4 scale-transition scale-out">
                <div class="card-content black-text">
                        <span class="card-title" id="popEditorTitle">Population Properties</span>
                </div>
                <ul class="collection">
                        <li class="collection-item">
                                <div class="row" style="margin-bottom: 0px;">
                                        <div class="col s9"><h5>Name:</h5></div>
                                        <div class="col s3"><input type="text" id="floatPopName"></div>
                                </div>
                        </li>
                        <li class="collection-item">
                                <div class="row" style="margin-bottom: 2px;">
                                        <div class="col s4"><h5>Position: </h5></div>
                                        <div class="col s2"><h5>Longitude</h5></div>
                                        <div class="col s2"><input type="text" id="floatLong"></div>
                                        <div class="col s2"><h5>Latitude</h5></div>
                                        <div class="col s2"><input type="text" id="floatLat"></div>
                                </div>
                        </li>
                        <li class="collection-item">
                                <div class="row" style="margin-bottom: 2px;">
                                        <div class="col s9"><h5>Population:</h5></div>
                                        <div class="col s3"><input type="text" id="floatPop"></div>
                                </div>
                        </li>
                        <li class="collection-item">
                                <div class="row" style="margin-bottom: 2px;">
                                        <div class="col s9"><h5>Growth:</h5></div>
                                        <div class="col s3"><input type="text" id="floatGrowth"></div>
                                </div>
                        </li>
                        <li class="collection-item">
                                <div class="row" style="margin-bottom: 2px;">
                                        <div class="col s9"><h5>Kill Rate:</h5></div>
                                        <div class="col s3"><input type="text" id="floatKill"></div>
                                </div>
                        </li>
                </ul>
                <div class="row" style="position: absolute; bottom: 8px; width: 100%">
                        <div class="col s2 offset-s7">
                                <a class="waves-effect waves-light btn red darken-2" onclick="closePopEditor(1);">Cancel</a>
                        </div>
                        <div class="col s2 offset-s1">
                                <a class="waves-effect waves-light btn" onclick="closePopEditor(0);">Done</a>
                        </div>
                </div>
        </div>
        <div id="floatingPopUpdater" class="floatingContent card blue-grey lighten-4 scale-transition scale-out">
                <div class="card-content black-text">
                        <span class="card-title" id="popUpdaterTitle">Modify Population</span>
                </div>
                <ul class="collection">
                        <li class="collection-item">
                                <div class="row" style="margin-bottom: 0px;">
                                        <div class="col s9"><h5>Name:</h5></div>
                                        <div class="col s3"><input type="text" id="floatPopUName"></div>
                                </div>
                        </li>
                        <li class="collection-item">
                                <div class="row" style="margin-bottom: 2px;">
                                        <div class="col s4"><h5>Position: </h5></div>
                                        <div class="col s2"><h5>Longitude</h5></div>
                                        <div class="col s2"><input type="text" id="floatULong"></div>
                                        <div class="col s2"><h5>Latitude</h5></div>
                                        <div class="col s2"><input type="text" id="floatULat"></div>
                                </div>
                        </li>
                        <li class="collection-item">
                                <div class="row" style="margin-bottom: 2px;">
                                        <div class="col s9"><h5>Population:</h5></div>
                                        <div class="col s3"><input type="text" id="floatUPop"></div>
                                </div>
                        </li>
                        <li class="collection-item">
                                <div class="row" style="margin-bottom: 2px;">
                                        <div class="col s9"><h5>Growth:</h5></div>
                                        <div class="col s3"><input type="text" id="floatUGrowth"></div>
                                </div>
                        </li>
                        <li class="collection-item">
                                <div class="row" style="margin-bottom: 2px;">
                                        <div class="col s9"><h5>Kill Rate:</h5></div>
                                        <div class="col s3"><input type="text" id="floatUKill"></div>
                                </div>
                        </li>
                </ul>
                <div class="row" style="position: absolute; bottom: 8px; width: 100%">
                        <div class="col s3 offset-s1">
                                <a class="waves-effect waves-light btn red darken-2" onclick="closePopUpdater(0);">Delete Village</a>
                        </div>
                        <div class="col s2 offset-s4">
                                <a class="waves-effect waves-light btn blue-grey lighten-3" onclick="closePopUpdater(1);">Cancel</a>
                        </div>
                        <div class="col s2">
                                <a class="waves-effect waves-light btn" onclick="closePopUpdater(2);">Update</a>
                        </div>
                </div>
        </div>

        <div id="hidepage"></div>
        <script src="js/input.js" type="text/javascript"></script>
        <script src="js/floatingContent.js" type="text/javascript"></script>
        <script src="js/tabs.js" type="text/javascript"></script>
        <script src="js/main.js" type="text/javascript"></script>
        <script src="js/table.js" type="text/javascript"></script>
        <script src="jsDev/model.js" type="text/javascript"></script>
        <script src="jsDev/testFunctions.js" type="text/javascript"></script>
        <script src="jsDev/FileSaver.min.js" type="text/javascript"></script>
        <script src="jsDev/saveLoad.js" type="text/javascript"></script>
</body>
</html>
